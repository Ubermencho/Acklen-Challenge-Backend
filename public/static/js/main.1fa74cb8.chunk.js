(this.webpackJsonpcollectionfrntend=this.webpackJsonpcollectionfrntend||[]).push([[0],{39:function(e,t,a){e.exports=a(78)},44:function(e,t,a){},45:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(36),i=a.n(o),l=(a(44),a(1)),c=a(3),s=a(4),u=a(2),h=a(6),m=a(5),d=(a(45),a(8)),p=a(7),g=a(38),f=function(e){var t=e.component,a=e.auth,n=Object(g.a)(e,["component","auth"]);return r.a.createElement(p.b,Object.assign({},n,{component:function(e){return a.isLogged?r.a.createElement(t,Object.assign({},e,{auth:a})):r.a.createElement(p.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},E=a(25),v=a.n(E),b=v.a.create();b.defaults.headers.common["cache-control"]="no-cache",b.defaults.headers.post["Content-Type"]="no-cache",b.defaults.headers.put["Content-Type"]="no-cache";var C=b,j=v.a.create();j.defaults.headers.common["cache-control"]="no-cache",j.defaults.headers.post["Content-Type"]="no-cache",j.defaults.headers.put["Content-Type"]="no-cache";var O=function(e){j.defaults.headers.common.Authorization="Bearer ".concat(e)},I=j,k=function(){try{return localStorage.setItem("t","t"),localStorage.removeItem("t"),!0}catch(e){return!1}}(),w=function(e,t){return!!k&&(localStorage.setItem(e,t),!0)},y=function(e){return k?localStorage.getItem(e):null},D=function(e){return!!k&&(localStorage.removeItem(e),!0)},N=a(10),S=(a(68),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={counter:0},e.counterUdpate=e.counterUdpate.bind(Object(u.a)(e)),e.logoutOnClick=e.logoutOnClick.bind(Object(u.a)(e)),e}return Object(s.a)(a,[{key:"counterUdpate",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({counter:this.state.counter+1})}},{key:"logoutOnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.auth.logout()}},{key:"render",value:function(){return this.props.hide?null:this.props.auth&&this.props.auth.isLogged?r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(d.c,{to:"/privatehome"},r.a.createElement(N.c,null),"Home")),r.a.createElement("li",null,r.a.createElement(d.c,{to:"/collections"},r.a.createElement(N.b,null),"My Collections")),r.a.createElement("li",null,r.a.createElement("a",{onClick:this.logoutOnClick},r.a.createElement(N.f,null),"Logout"))))):r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(d.c,{to:"/"},r.a.createElement(N.c,null),"Home")),r.a.createElement("li",null,r.a.createElement(d.c,{to:"/signin"},r.a.createElement(N.f,null),"Sign in")),r.a.createElement("li",null,r.a.createElement(d.c,{to:"/login"},r.a.createElement(N.f,null),"Login")))))}}]),a}(n.Component)),L=(a(69),function(e){var t=e.children,a=e.title;e.login;return r.a.createElement("footer",null,r.a.createElement("h1",null," ",a," ",t))}),P=(a(70),function(e){var t=e.pageTitle,a=e.hideHeader,n=e.children,o=e.auth,i=a||!1;return r.a.createElement("section",{className:"page"},i?null:r.a.createElement(S,{auth:o}),r.a.createElement("main",null,n),r.a.createElement(L,null,t||"page"))}),T=(a(71),function(e){var t=e.auth;return r.a.createElement(P,{pageTitle:"Collection Tracker V1.0",auth:t},r.a.createElement("body",null,r.a.createElement("p",{className:"HomeWelcome"},"Welcome to the Collection Tracker Web-App")))}),A=a(14),H=(a(72),function(e){var t=e.name,a=e.value,n=e.type,o=e.caption,i=e.onChange,l=e.error;return r.a.createElement("fieldset",null,r.a.createElement("label",{htmlFor:t},o),r.a.createElement("input",{type:n||"text",name:t,id:t,value:a,onChange:i||function(e){return!1}}),l?r.a.createElement("span",{className:"error"},l):null)}),x=(a(73),function(e){var t=e.children;return r.a.createElement("fieldset",{className:"action"},t)}),M=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/,U=/^\s?$/,R=(a(74),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={userName:"",userNameError:null,userEmail:"",userEmailerror:null,userPassword:"",userPassworderror:null},e.onChangeHandler=e.onChangeHandler.bind(Object(u.a)(e)),e.onClickCreateAccount=e.onClickCreateAccount.bind(Object(u.a)(e)),e.validate=e.validate.bind(Object(u.a)(e)),e}return Object(s.a)(a,[{key:"validate",value:function(){var e=null,t=[],a=this.state.userEmail,n=this.state.userPassword;return void 0!==a&&(M.test(a)||t.push("Your E-mail is an incorrect format"),/^\s*$/.test(a)&&t.push("You must enter an adecuate E-mail"),t.length&&(e=Object.assign({},e,{emailError:t.join(". ")}),alert(e.emailError))),void 0!==n&&(t=[],U.test(n)&&t.push("Please enter a password"),t.length&&(e=Object.assign({},e,{passwordError:t.join(". ")}),alert(e.passwordError))),e}},{key:"onChangeHandler",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;this.setState(Object(l.a)(Object(l.a)({},this.state),{},Object(A.a)({},a,n)))}},{key:"onClickCreateAccount",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.validate();if(t)this.setState(Object(l.a)(Object(l.a)({},this.state),t));else{var a=this.state.userName,n=this.state.userPassword,r=this.state.userEmail;C.post("/api/user/new",{email:r,pass:n,name:a}).then((function(e){alert(e.data)})).catch((function(e){alert(e)}))}}},{key:"render",value:function(){return r.a.createElement(P,{pageTitle:"New Account",auth:this.props.auth},r.a.createElement("body",{className:"body"},r.a.createElement(H,{name:"userName",caption:"User Name",value:this.state.userName,type:"text",onChange:this.onChangeHandler,error:this.userNameError}),r.a.createElement(H,{name:"userEmail",caption:"Your E-mail",value:this.state.userEmail,type:"text",onChange:this.onChangeHandler,error:this.userEmailError}),r.a.createElement(H,{name:"userPassword",caption:"Your Password...",value:this.state.userPassword,type:"text",onChange:this.onChangeHandler,error:this.userPassworderror}),r.a.createElement(x,null,r.a.createElement("button",{onClick:this.onClickCreateAccount},"Create my Account"))))}}]),a}(n.Component)),F=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={userEmail:"",userEmailerror:null,userPassword:"",userPassworderror:null,redirectTo:!1},e.onChangeHandler=e.onChangeHandler.bind(Object(u.a)(e)),e.onClickLogin=e.onClickLogin.bind(Object(u.a)(e)),e.validate=e.validate.bind(Object(u.a)(e)),e}return Object(s.a)(a,[{key:"validate",value:function(){var e=null,t=[],a=this.state.userEmail,n=this.state.userPassword;return void 0!==a&&(M.test(a)||t.push("Your E-mail is an incorrect format"),/^\s*$/.test(a)&&t.push("You must enter an adecuate E-mail"),t.length&&(e=Object.assign({},e,{emailError:t.join(". ")}),alert(e.emailError))),void 0!==n&&(t=[],U.test(n)&&t.push("Please enter a password"),t.length&&(e=Object.assign({},e,{passwordError:t.join(". ")}),alert(e.passwordError))),e}},{key:"onChangeHandler",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;this.setState(Object(l.a)(Object(l.a)({},this.state),{},Object(A.a)({},a,n)))}},{key:"onClickLogin",value:function(e){var t=this;e.preventDefault(),e.stopPropagation();var a=this.validate();if(a)this.setState(Object(l.a)(Object(l.a)({},this.state),a));else{var n=this.state.userEmail,r=this.state.userPassword;C.post("/api/user/login",{userEmail:n,userPassword:r}).then((function(e){console.log(e.data),"User not found!"===e.data?alert(e.data):(alert(e.data.Message),t.props.login(e.data),t.setState(Object(l.a)(Object(l.a)({},t.state),{},{redirectTo:!0})))})).catch((function(e){console.log(e)}))}}},{key:"render",value:function(){if(this.state.redirectTo){var e=this.props.location.state?this.props.location.state.from.pathname:"/privatehome";return r.a.createElement(p.a,{to:e})}return r.a.createElement(P,{pageTitle:"Login",auth:this.props.auth},r.a.createElement("body",{className:"body"},r.a.createElement(H,{name:"userEmail",caption:"Your E-mail",value:this.state.userEmail,type:"text",onChange:this.onChangeHandler,error:this.userEmailError}),r.a.createElement(H,{name:"userPassword",caption:"Your Password...",value:this.state.userPassword,type:"password",onChange:this.onChangeHandler,error:this.userPassworderror}),r.a.createElement(x,null,r.a.createElement("button",{onClick:this.onClickLogin},"Login"),r.a.createElement(d.c,{to:"signin"},r.a.createElement("button",null,"Create an Account")))))}}]),a}(n.Component),V=a(19),W=a.n(V),Y=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={results:[],hasMore:!0,offset:0,itemsToLoad:10,itemID:0,redirect:!1},e.loadMore=e.loadMore.bind(Object(u.a)(e)),e}return Object(s.a)(a,[{key:"loadMore",value:function(){var e=this,t=this.state.itemsToLoad,a=this.props.match.params.id;w("collID",this.props.match.params.id);var n="/api/collections/detail/".concat(a,"/").concat(this.state.offset,"/").concat(t);I.get(n).then((function(a){var n=a.data,r=n,o=n.length,i=e.state.results;r.map((function(e){return i.push(e)})),e.state.offset+=t,o?e.setState({results:i,hasMore:!0}):e.setState({hasMore:!1})})).catch((function(e){alert(e)}))}},{key:"render",value:function(){var e=this,t=this.state.results.map((function(e){return r.a.createElement("div",{className:"listItem",key:parseInt(e.itemID)},r.a.createElement("img",{className:"image",src:e.picture}),r.a.createElement("span",null,"Name: ",e.itemName),r.a.createElement("span",null,"Description: ",e.itemDescription),r.a.createElement("span",null,"Value: ",e.itemValue),r.a.createElement("span",null,"Condition: ",e.itemCondition))}));return r.a.createElement(P,{pageTitle:"Collection's Detail",auth:this.props.auth},r.a.createElement("div",{ref:function(t){return e.scrollParentRef=t}},r.a.createElement("h2",null,"Items in this Collection"),r.a.createElement(W.a,{pageStart:0,loadMore:this.loadMore,hasMore:this.state.hasMore,threshold:108,getScrollParent:function(){return e.scrollParentRef},loader:r.a.createElement("div",{key:"pblistLoading"},"Loading Items...")},t)))}}]),a}(n.Component),z=(a(76),function(e){var t=e.auth;return r.a.createElement(P,{pageTitle:"Collection Tracker V1.0",auth:t},r.a.createElement("body",null,r.a.createElement("p",{className:"HomeWelcome"},"Welcome, ",y("userName"),"!!")))}),B=(a(77),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={results:[],hasMore:!0,offset:0,itemsToLoad:10,base:"adasd"},e.loadMore=e.loadMore.bind(Object(u.a)(e)),e}return Object(s.a)(a,[{key:"loadMore",value:function(){var e=this,t=this.state.itemsToLoad;D("collID");var a=y("userID"),n="/api/collections/all/".concat(parseInt(a),"/").concat(parseInt(this.state.offset),"/").concat(t);I.get(n).then((function(a){var n=a.data,r=n,o=n.length,i=e.state.results;r.map((function(e){return i.push(e)})),e.state.offset+=t,o?e.setState({results:i,hasMore:!0}):e.setState({hasMore:!1})})).catch((function(e){alert(e)}))}},{key:"render",value:function(){var e=this,t=this.state.results.map((function(e){return r.a.createElement("div",{className:"listItem",key:parseInt(e.collectionID)},r.a.createElement("img",{className:"image",src:e.Picture}),r.a.createElement("span",null,"Title: ",e.title),r.a.createElement("span",null,"Description: ",e.Description),r.a.createElement("span",null,"Extras: ",e.extras),r.a.createElement(d.b,{to:"/collections/".concat(e.collectionID)},r.a.createElement(N.d,{size:"2em",color:"black"})))}));return r.a.createElement(P,{pageTitle:"Your Collections",auth:this.props.auth},r.a.createElement("div",{ref:function(t){return e.scrollParentRef=t}},r.a.createElement("h2",null,"Your Collections!"),r.a.createElement(d.b,{to:"/newcollection"},r.a.createElement("button",{className:"addnew"},r.a.createElement(N.a,null),"Add a new Collection")),r.a.createElement(W.a,{pageStart:0,loadMore:this.loadMore,hasMore:this.state.hasMore,threshold:108,getScrollParent:function(){return e.scrollParentRef},loader:r.a.createElement("div",{key:"pbListLoading"},"Loading Collections...")},t)))}}]),a}(n.Component)),$=a(20),_=a.n($),J=a(16),G=a.n(J),q=(a(22),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).handleFile=function(t){var a=new FileReader;a.onloadend=function(){e.setState({src:a.result})},a.readAsDataURL(t.target.files[0])},e.onImageLoaded=function(t){e.imageRef=t},e.onCropChange=function(t){e.setState({crop:t})},e.onCropComplete=function(t){if(e.imageRef&&t.width&&t.height){var a=e.getCroppedImg(e.imageRef,t);e.setState({croppedImageUrl:a})}},e.state={colltitle:"",colltitleerr:null,colldesc:"",colldescerr:null,collextras:"",collPic:null,itemID:0,src:null,crop:{unit:"%",width:30,aspect:1},croppedImageUrl:null,croppedUrl:null,redirect:!1},e.onChangeHandler=e.onChangeHandler.bind(Object(u.a)(e)),e.validate=e.validate.bind(Object(u.a)(e)),e.onClickAddCollection=e.onClickAddCollection.bind(Object(u.a)(e)),e}return Object(s.a)(a,[{key:"validate",value:function(){var e=null,t=[],a=this.state.colltitle,n=this.state.colldesc;return void 0!==a&&(U.test(a)&&t.push("Please enter a Title"),t.length&&(e=Object.assign({},e,{emailError:t.join(". ")}),alert(e.emailError))),void 0!==n&&(t=[],U.test(n)&&t.push("Please enter a Description"),t.length&&(e=Object.assign({},e,{passwordError:t.join(". ")}),alert(e.passwordError))),e}},{key:"onChangeHandler",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;this.setState(Object(l.a)(Object(l.a)({},this.state),{},Object(A.a)({},a,n)))}},{key:"onClickAddCollection",value:function(e){var t=this;e.preventDefault(),e.stopPropagation();var a=this.validate();if(a)this.setState(Object(l.a)(Object(l.a)({},this.state),a));else{var n=this.state.colltitle,r=this.state.colldesc,o=this.state.collextras,i=this.state.croppedUrl,c=y("userID");I.post("/api/collections/new",{creatorID:c,title:n,Description:r,Picture:i,extras:o}).then((function(e){alert(e.data.Message),t.setState(Object(l.a)(Object(l.a)({},t.state),{},{redirect:!0}))})).catch((function(e){alert(e)}))}}},{key:"getCroppedImg",value:function(e,t){var a=document.createElement("canvas"),n=e.naturalWidth/e.width,r=e.naturalHeight/e.height;a.width=t.width,a.height=t.height;var o=a.getContext("2d"),i=this;G.a.getData(e,(function(){switch(G.a.getAllTags(this).Orientation){case 2:o.transform(-1,0,0,1,t.width,0);break;case 3:o.transform(-1,0,0,-1,t.width,t.height);break;case 4:o.transform(1,0,0,-1,0,t.height);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,t.height,0);break;case 7:o.transform(0,-1,-1,0,t.height,t.width);break;case 8:o.transform(0,-1,1,0,0,t.width);break;default:o.transform(1,0,0,1,0,0)}o.drawImage(e,t.x*n,t.y*r,t.width*n,t.height*r,0,0,t.width,t.height);var l=new FileReader;a.toBlob((function(e){l.readAsDataURL(e),l.onloadend=function(){i.dataURLtoFile(l.result,"cropped.jpg")}}))}))}},{key:"dataURLtoFile",value:function(e,t){for(var a=e.split(","),n=a[0].match(/:(.*?);/)[1],r=atob(a[1]),o=r.length,i=new Uint8Array(o);o--;)i[o]=r.charCodeAt(o);var l=new File([i],t,{type:n});this.setState({croppedImage:l,croppedUrl:e})}},{key:"render",value:function(){var e=this.state,t=e.crop,a=(e.profile_pic,e.src),n=e.croppedUrl;if(this.state.redirect){var o=this.props.location.state?this.props.location.state.from.pathname:"/collections";return r.a.createElement(p.a,{to:o})}return r.a.createElement(P,{pageTitle:"New Collection",auth:this.props.auth},r.a.createElement("h2",null,"Adding a new Collection!"),r.a.createElement(H,{name:"colltitle",caption:"Collection Title",value:this.state.colltitle,type:"text",onChange:this.onChangeHandler,error:this.userNameError}),r.a.createElement(H,{name:"colldesc",caption:"Collection Description",value:this.state.colldesc,type:"text",onChange:this.onChangeHandler,error:this.userEmailError}),r.a.createElement(H,{name:"collextras",caption:"Colllection Extras",value:this.state.collextras,type:"text",onChange:this.onChangeHandler,error:this.userPassworderror}),r.a.createElement("input",{type:"file",onChange:this.handleFile,accept:"jpg"}),a&&r.a.createElement(_.a,{src:a,crop:t,onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange}),n&&r.a.createElement("img",{src:n}),r.a.createElement(x,null,r.a.createElement("button",{onClick:this.onClickAddCollection},"Add my Collection!")))}}]),a}(n.Component)),K=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={results:[],hasMore:!0,offset:0,itemsToLoad:10,itemID:0,redirect:!1},e.loadMore=e.loadMore.bind(Object(u.a)(e)),e.setItemID=e.setItemID.bind(Object(u.a)(e)),e}return Object(s.a)(a,[{key:"loadMore",value:function(){var e=this,t=this.state.itemsToLoad,a=this.props.match.params.id;w("collID",this.props.match.params.id);var n="/api/collections/detail/".concat(a,"/").concat(this.state.offset,"/").concat(t);I.get(n).then((function(a){var n=a.data,r=n,o=n.length,i=e.state.results;r.map((function(e){return i.push(e)})),e.state.offset+=t,o?e.setState({results:i,hasMore:!0}):e.setState({hasMore:!1})})).catch((function(e){alert(e)}))}},{key:"setItemID",value:function(e){this.setState({itemID:e,redirect:!0})}},{key:"generateShareLink",value:function(){var e=y("collID"),t="collections/shared/".concat(e);alert("Share this link: "+t)}},{key:"render",value:function(){var e=this;if(this.state.redirect){var t=this.props.location.state?this.props.location.state.from.pathname:"/deleteItem/".concat(this.state.itemID);return r.a.createElement(p.a,{to:t})}var a=this.state.results.map((function(t){return r.a.createElement("div",{className:"listItem",key:parseInt(t.itemID)},r.a.createElement("img",{className:"image",src:t.picture}),r.a.createElement("span",null,"Name: ",t.itemName),r.a.createElement("span",null,"Description: ",t.itemDescription),r.a.createElement("span",null,"Value: ",t.itemValue),r.a.createElement("span",null,"Condition: ",t.itemCondition),r.a.createElement(d.b,{to:"/editItem/".concat(t.itemID)},r.a.createElement(N.e,{size:"2em",color:"black"})),r.a.createElement(N.h,{size:"2em",onClick:function(){return e.setItemID(t.itemID)}}))}));return r.a.createElement(P,{pageTitle:"Collection's Detail",auth:this.props.auth},r.a.createElement("div",{ref:function(t){return e.scrollParentRef=t}},r.a.createElement("h2",null,"Items in this Collection"),r.a.createElement(d.b,{to:"/newItem"},r.a.createElement("button",{className:"addnew"},r.a.createElement(N.a,{size:"2em"}),"Add a new Item to this collection")),r.a.createElement("button",{className:"addnew",onClick:this.generateShareLink},r.a.createElement(N.g,{size:"2em"}),"Share This Collection!"),r.a.createElement(W.a,{pageStart:0,loadMore:this.loadMore,hasMore:this.state.hasMore,threshold:108,getScrollParent:function(){return e.scrollParentRef},loader:r.a.createElement("div",{key:"pblistLoading"},"Loading Items...")},a)))}}]),a}(n.Component),Q=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).handleFile=function(t){var a=new FileReader;a.onloadend=function(){e.setState({src:a.result})},a.readAsDataURL(t.target.files[0])},e.onImageLoaded=function(t){e.imageRef=t},e.onCropChange=function(t){e.setState({crop:t})},e.onCropComplete=function(t){if(e.imageRef&&t.width&&t.height){var a=e.getCroppedImg(e.imageRef,t);e.setState({croppedImageUrl:a})}},e.state={itemName:"",itemNameerr:null,itemDescription:"",itemDescriptionerr:null,itemValue:0,itemCondition:"",itemPic:null,src:null,crop:{unit:"%",width:30,aspect:1},croppedImageUrl:null,croppedUrl:null,redirect:!1},e.onChangeHandler=e.onChangeHandler.bind(Object(u.a)(e)),e.validate=e.validate.bind(Object(u.a)(e)),e.onClickAddItem=e.onClickAddItem.bind(Object(u.a)(e)),e}return Object(s.a)(a,[{key:"validate",value:function(){var e=null,t=[],a=this.state.itemName,n=this.state.itemDescription,r=this.state.itemCondition;return void 0!==a&&(U.test(a)&&t.push("Please enter a Name"),t.length&&(e=Object.assign({},e,{NameError:t.join(". ")}),alert(e.NameError))),void 0!==n&&(t=[],U.test(n)&&t.push("Please enter a Description"),t.length&&(e=Object.assign({},e,{descriptionError:t.join(". ")}),alert(e.descriptionError))),void 0!==r&&(t=[],U.test(r)&&t.push("Please enter a Condition"),t.length&&(e=Object.assign({},e,{conditionError:t.join(". ")}),alert(e.conditionError))),e}},{key:"onChangeHandler",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;this.setState(Object(l.a)(Object(l.a)({},this.state),{},Object(A.a)({},a,n)))}},{key:"onClickAddItem",value:function(e){var t=this;e.preventDefault(),e.stopPropagation();var a=this.validate();if(a)this.setState(Object(l.a)(Object(l.a)({},this.state),a));else{var n=this.state.itemName,r=this.state.itemDescription,o=this.state.itemValue,i=this.state.itemCondition,c=this.state.croppedUrl,s=y("collID");I.post("/api/collections/item/new",{collectionid:s,itemname:n,description:r,picture:c,itemvalue:o,condition:i}).then((function(e){alert(e.data.Message),t.setState(Object(l.a)(Object(l.a)({},t.state),{},{redirect:!0}))})).catch((function(e){alert(e)}))}}},{key:"getCroppedImg",value:function(e,t){var a=document.createElement("canvas"),n=e.naturalWidth/e.width,r=e.naturalHeight/e.height;a.width=t.width,a.height=t.height;var o=a.getContext("2d"),i=this;G.a.getData(e,(function(){switch(G.a.getAllTags(this).Orientation){case 2:o.transform(-1,0,0,1,t.width,0);break;case 3:o.transform(-1,0,0,-1,t.width,t.height);break;case 4:o.transform(1,0,0,-1,0,t.height);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,t.height,0);break;case 7:o.transform(0,-1,-1,0,t.height,t.width);break;case 8:o.transform(0,-1,1,0,0,t.width);break;default:o.transform(1,0,0,1,0,0)}o.drawImage(e,t.x*n,t.y*r,t.width*n,t.height*r,0,0,t.width,t.height);var l=new FileReader;a.toBlob((function(e){l.readAsDataURL(e),l.onloadend=function(){i.dataURLtoFile(l.result,"cropped.jpg")}}))}))}},{key:"dataURLtoFile",value:function(e,t){for(var a=e.split(","),n=a[0].match(/:(.*?);/)[1],r=atob(a[1]),o=r.length,i=new Uint8Array(o);o--;)i[o]=r.charCodeAt(o);var l=new File([i],t,{type:n});this.setState({croppedImage:l,croppedUrl:e})}},{key:"render",value:function(){var e=this.state,t=e.crop,a=(e.profile_pic,e.src),n=e.croppedUrl;if(this.state.redirect){var o=this.props.location.state?this.props.location.state.from.pathname:"/collections/".concat(y("collID"));return D("collID"),r.a.createElement(p.a,{to:o})}return r.a.createElement(P,{pageTitle:"Adding a new Item",auth:this.props.auth},r.a.createElement("h2",null,"Adding a new Item to the Collection!"),r.a.createElement(H,{name:"itemName",caption:"Item Name",value:this.state.itemName,type:"text",onChange:this.onChangeHandler,error:this.itemNameError}),r.a.createElement(H,{name:"itemDescription",caption:"Item's Description",value:this.state.itemDescription,type:"text",onChange:this.onChangeHandler,error:this.itemDescriptionError}),r.a.createElement(H,{name:"itemValue",caption:"Item's Value",value:this.state.itemValue,type:"number",onChange:this.onChangeHandler,error:this.itemValueerror}),r.a.createElement(H,{name:"itemCondition",caption:"Item's Condition",value:this.state.itemCondition,type:"text",onChange:this.onChangeHandler,error:this.itemConditionerror}),r.a.createElement("input",{type:"file",onChange:this.handleFile,accept:"jpg"}),a&&r.a.createElement(_.a,{src:a,crop:t,onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange}),n&&r.a.createElement("img",{src:n}),r.a.createElement(x,null,r.a.createElement("button",{onClick:this.onClickAddItem},"Add my Item!")))}}]),a}(n.Component),X=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).handleFile=function(t){var a=new FileReader;a.onloadend=function(){e.setState({src:a.result})},a.readAsDataURL(t.target.files[0])},e.onImageLoaded=function(t){e.imageRef=t},e.onCropChange=function(t){e.setState({crop:t})},e.onCropComplete=function(t){if(e.imageRef&&t.width&&t.height){var a=e.getCroppedImg(e.imageRef,t);e.setState({croppedImageUrl:a})}},e.state={itemName:"",itemNameerr:null,itemDescription:"",itemDescriptionerr:null,itemValue:0,itemCondition:"",itemPic:null,src:null,crop:{unit:"%",width:30,aspect:1},croppedImageUrl:null,croppedUrl:null,redirect:!1},e.onChangeHandler=e.onChangeHandler.bind(Object(u.a)(e)),e.validate=e.validate.bind(Object(u.a)(e)),e.onClickAddItem=e.onClickAddItem.bind(Object(u.a)(e)),e}return Object(s.a)(a,[{key:"validate",value:function(){var e=null,t=[],a=this.state.itemName,n=this.state.itemDescription,r=this.state.itemCondition;return void 0!==a&&(U.test(a)&&t.push("Please enter a Name"),t.length&&(e=Object.assign({},e,{NameError:t.join(". ")}),alert(e.NameError))),void 0!==n&&(t=[],U.test(n)&&t.push("Please enter a Description"),t.length&&(e=Object.assign({},e,{descriptionError:t.join(". ")}),alert(e.descriptionError))),void 0!==r&&(t=[],U.test(r)&&t.push("Please enter a Condition"),t.length&&(e=Object.assign({},e,{conditionError:t.join(". ")}),alert(e.conditionError))),e}},{key:"onChangeHandler",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;this.setState(Object(l.a)(Object(l.a)({},this.state),{},Object(A.a)({},a,n)))}},{key:"onClickAddItem",value:function(e){var t=this;w("itemID",this.props.match.params.id),e.preventDefault(),e.stopPropagation();var a=this.validate();if(a)this.setState(Object(l.a)(Object(l.a)({},this.state),a));else{var n=this.state.itemName,r=this.state.itemDescription,o=this.state.itemValue,i=this.state.itemCondition,c=this.state.croppedUrl,s=y("itemID"),u="/api/collections/item/upd/".concat(s);D("itemID"),I.put(u,{itemname:n,description:r,picture:c,itemvalue:o,condition:i}).then((function(e){alert(e.data.Message),t.setState(Object(l.a)(Object(l.a)({},t.state),{},{redirect:!0}))})).catch((function(e){alert(e)}))}}},{key:"getCroppedImg",value:function(e,t){var a=document.createElement("canvas"),n=e.naturalWidth/e.width,r=e.naturalHeight/e.height;a.width=t.width,a.height=t.height;var o=a.getContext("2d"),i=this;G.a.getData(e,(function(){switch(G.a.getAllTags(this).Orientation){case 2:o.transform(-1,0,0,1,t.width,0);break;case 3:o.transform(-1,0,0,-1,t.width,t.height);break;case 4:o.transform(1,0,0,-1,0,t.height);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,t.height,0);break;case 7:o.transform(0,-1,-1,0,t.height,t.width);break;case 8:o.transform(0,-1,1,0,0,t.width);break;default:o.transform(1,0,0,1,0,0)}o.drawImage(e,t.x*n,t.y*r,t.width*n,t.height*r,0,0,t.width,t.height);var l=new FileReader;a.toBlob((function(e){l.readAsDataURL(e),l.onloadend=function(){i.dataURLtoFile(l.result,"cropped.jpg")}}))}))}},{key:"dataURLtoFile",value:function(e,t){for(var a=e.split(","),n=a[0].match(/:(.*?);/)[1],r=atob(a[1]),o=r.length,i=new Uint8Array(o);o--;)i[o]=r.charCodeAt(o);var l=new File([i],t,{type:n});this.setState({croppedImage:l,croppedUrl:e})}},{key:"render",value:function(){var e=this.state,t=e.crop,a=(e.profile_pic,e.src),n=e.croppedUrl;if(this.state.redirect){var o=this.props.location.state?this.props.location.state.from.pathname:"/collections";return r.a.createElement(p.a,{to:o})}return r.a.createElement(P,{pageTitle:"Editing an Item",auth:this.props.auth},r.a.createElement("h2",null,"Editing your selected Item!"),r.a.createElement(H,{name:"itemName",caption:"Edit Item Name",value:this.state.itemName,type:"text",onChange:this.onChangeHandler,error:this.itemNameError}),r.a.createElement(H,{name:"itemDescription",caption:"Edit Item's Description",value:this.state.itemDescription,type:"text",onChange:this.onChangeHandler,error:this.itemDescriptionError}),r.a.createElement(H,{name:"itemValue",caption:"Edit Item's Value",value:this.state.itemValue,type:"number",onChange:this.onChangeHandler,error:this.itemValueerror}),r.a.createElement(H,{name:"itemCondition",caption:"Edit Item's Condition",value:this.state.itemCondition,type:"text",onChange:this.onChangeHandler,error:this.itemConditionerror}),r.a.createElement("input",{type:"file",onChange:this.handleFile,accept:"jpg"}),a&&r.a.createElement(_.a,{src:a,crop:t,onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange}),n&&r.a.createElement("img",{src:n}),r.a.createElement(x,null,r.a.createElement("button",{onClick:this.onClickAddItem},"Edit my Item!")))}}]),a}(n.Component),Z=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={collID:0,redirect:!1},e.redirecttoCollection=e.redirecttoCollection.bind(Object(u.a)(e)),e.DeleteItem=e.DeleteItem.bind(Object(u.a)(e)),e}return Object(s.a)(a,[{key:"redirecttoCollection",value:function(){var e=y("collID");this.setState({collID:e,redirect:!0})}},{key:"DeleteItem",value:function(){var e=this,t=this.props.match.params.id,a="/api/collections/item/del/".concat(t);I.delete(a).then((function(t){alert(t.data.Message),e.setState(Object(l.a)(Object(l.a)({},e.state),{},{collID:y("collID"),redirect:!0})),D("collID")})).catch((function(e){alert(e)}))}},{key:"render",value:function(){if(this.state.redirect){var e=this.props.location.state?this.props.location.state.from.pathname:"/collections/".concat(this.state.collID);return r.a.createElement(p.a,{to:e})}return r.a.createElement(P,{pageTitle:"Deleting an Item",auth:this.props.auth},r.a.createElement("h2",null,"ALERT! DELETING AN ITEM IS PERMANENT, DO YOU STILL WISH TO DELETE THIS ITEM?"),r.a.createElement(x,null,r.a.createElement("button",{onClick:this.DeleteItem},"Delete it!"),r.a.createElement("button",{onClick:this.redirecttoCollection},"Don't Delete it!")))}}]),a}(n.Component),ee=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={user:y("user")||{},jwt:y("jwt")||"",isLogged:!1,loadingBackend:!1},""!==e.state.jwt&&(e.state.isLogged=!0,O(e.state.jwt)),e.login=e.login.bind(Object(u.a)(e)),e.logout=e.logout.bind(Object(u.a)(e)),e}return Object(s.a)(a,[{key:"login",value:function(e){var t=e.jwt,a=e.user;this.setState(Object(l.a)(Object(l.a)({},this.state),{},{isLogged:!0,loadingBackend:!1,user:a[0],jwt:t})),console.log(this.state.user),O(t),w("jwt",t),w("userID",a[0].userID),w("userName",a[0].userName)}},{key:"logout",value:function(){D("jwt"),D("userID"),D("userName"),this.setState(Object(l.a)(Object(l.a)({},this.state),{},{isLogged:!1,user:{},jwt:""}))}},{key:"render",value:function(){var e=this,t={isLogged:this.state.isLogged,user:this.state.user,logout:this.logout};return r.a.createElement(d.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(p.d,null,r.a.createElement(p.b,{render:function(e){return r.a.createElement(T,Object.assign({},e,{auth:t}))},path:"/",exact:!0}),r.a.createElement(p.b,{render:function(e){return r.a.createElement(R,Object.assign({},e,{auth:t}))},path:"/signin",exact:!0}),r.a.createElement(p.b,{render:function(a){return r.a.createElement(F,Object.assign({},a,{auth:t,login:e.login}))},path:"/login",exact:!0}),r.a.createElement(p.b,{render:function(e){return r.a.createElement(Y,Object.assign({},e,{auth:t}))},path:"/collections/shared/:id",exact:!0}),r.a.createElement(f,{component:z,path:"/privatehome",exact:!0,auth:t}),r.a.createElement(f,{component:B,path:"/collections",exact:!0,auth:t}),r.a.createElement(f,{component:q,path:"/newcollection",exact:!0,auth:t}),r.a.createElement(f,{component:K,path:"/collections/:id",exact:!0,auth:t}),r.a.createElement(f,{component:Q,path:"/newItem",exact:!0,auth:t}),r.a.createElement(f,{component:X,path:"/editItem/:id",exact:!0,auth:t}),r.a.createElement(f,{component:Z,path:"/deleteItem/:id",exact:!0,auth:t}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.1fa74cb8.chunk.js.map